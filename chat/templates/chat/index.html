<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Chat by PAULO</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
        <style>
            .message {
                position: absolute;
                width: 300px;
                padding: 5px;
                background-color: aqua;
                border-radius: 5px;
                top: 10px;
                right: 10px;

            }
        </style>
    </head>

    <body>
        <section class="section">
            <div class="container">
                <div class="">
                    <div class="column is-6 is-offset-3 mb-6">
                        <section class="hero is-primary">
                            <div class="hero-body">
                                <p class="title">
                                    Chat by PAULO
                                </p>
                            </div>
                        </section>
                    </div>

                    <div class="column is-4 is-offset-4">
                        <form method="get" action="{% url 'room_redirect' %}">
                            {% csrf_token %}
                            <div class="field">
                                <label>Room name</label>

                                <div class="control">
                                    <label for="room-name-input">
                                        <input class="input" type="text" placeholder="Room name" name="room_name">
                                    </label>
                                </div>
                            </div>
                            <div class="field">
                                <div class="control">
                                    <button class="button is-info" id="room-name-submit">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <div class="message">
            <h1>Hi, {{ user.username }}</h1>
            <h1>There are available room:</h1>
           {% for r in room %}
               <h1>{{ r.title }}</h1>
            {% endfor %}
        </div>

        <script>
            document.querySelector('#room-name-input').focus();

            document.querySelector('#room-name-submit').onclick = function(e) {
                let roomName = document.querySelector('#room-name-input').value;

                window.location.replace(roomName + '/?username=' + userName);
            };
        </script>
    </body>
</html>